{"ast":null,"code":"import * as d3 from \"d3\";\n\nconst Donut3D = () => {\n  var Donut3D = {};\n\n  function pieTop(d, rx, ry, ir) {\n    if (d.endAngle - d.startAngle == 0) return \"M 0 0\";\n    var sx = rx * Math.cos(d.startAngle),\n        sy = ry * Math.sin(d.startAngle),\n        ex = rx * Math.cos(d.endAngle),\n        ey = ry * Math.sin(d.endAngle);\n    var ret = [];\n    ret.push(\"M\", sx, sy, \"A\", rx, ry, \"0\", d.endAngle - d.startAngle > Math.PI ? 1 : 0, \"1\", ex, ey, \"L\", ir * ex, ir * ey);\n    ret.push(\"A\", ir * rx, ir * ry, \"0\", d.endAngle - d.startAngle > Math.PI ? 1 : 0, \"0\", ir * sx, ir * sy, \"z\");\n    return ret.join(\" \");\n  }\n\n  function pieOuter(d, rx, ry, h) {\n    var startAngle = d.startAngle > Math.PI ? Math.PI : d.startAngle;\n    var endAngle = d.endAngle > Math.PI ? Math.PI : d.endAngle;\n    var sx = rx * Math.cos(startAngle),\n        sy = ry * Math.sin(startAngle),\n        ex = rx * Math.cos(endAngle),\n        ey = ry * Math.sin(endAngle);\n    var ret = [];\n    ret.push(\"M\", sx, h + sy, \"A\", rx, ry, \"0 0 1\", ex, h + ey, \"L\", ex, ey, \"A\", rx, ry, \"0 0 0\", sx, sy, \"z\");\n    return ret.join(\" \");\n  }\n\n  function pieInner(d, rx, ry, h, ir) {\n    var startAngle = d.startAngle < Math.PI ? Math.PI : d.startAngle;\n    var endAngle = d.endAngle < Math.PI ? Math.PI : d.endAngle;\n    var sx = ir * rx * Math.cos(startAngle),\n        sy = ir * ry * Math.sin(startAngle),\n        ex = ir * rx * Math.cos(endAngle),\n        ey = ir * ry * Math.sin(endAngle);\n    var ret = [];\n    ret.push(\"M\", sx, sy, \"A\", ir * rx, ir * ry, \"0 0 1\", ex, ey, \"L\", ex, h + ey, \"A\", ir * rx, ir * ry, \"0 0 0\", sx, h + sy, \"z\");\n    return ret.join(\" \");\n  }\n\n  function getPercent(d) {\n    return d.endAngle - d.startAngle > 0.2 ? Math.round(1000 * (d.endAngle - d.startAngle) / (Math.PI * 2)) / 10 + '%' : '';\n  }\n\n  Donut3D.transition = function (id, data, rx, ry, h, ir) {\n    function arcTweenInner(a) {\n      var i = d3.interpolate(this._current, a);\n      this._current = i(0);\n      return function (t) {\n        return pieInner(i(t), rx + 0.5, ry + 0.5, h, ir);\n      };\n    }\n\n    function arcTweenTop(a) {\n      var i = d3.interpolate(this._current, a);\n      this._current = i(0);\n      return function (t) {\n        return pieTop(i(t), rx, ry, ir);\n      };\n    }\n\n    function arcTweenOuter(a) {\n      var i = d3.interpolate(this._current, a);\n      this._current = i(0);\n      return function (t) {\n        return pieOuter(i(t), rx - .5, ry - .5, h);\n      };\n    }\n\n    function textTweenX(a) {\n      var i = d3.interpolate(this._current, a);\n      this._current = i(0);\n      return function (t) {\n        return 0.6 * rx * Math.cos(0.5 * (i(t).startAngle + i(t).endAngle));\n      };\n    }\n\n    function textTweenY(a) {\n      var i = d3.interpolate(this._current, a);\n      this._current = i(0);\n      return function (t) {\n        return 0.6 * rx * Math.sin(0.5 * (i(t).startAngle + i(t).endAngle));\n      };\n    }\n\n    var _data = d3.layout.pie().sort(null).value(function (d) {\n      return d.value;\n    })(data);\n\n    d3.select(\"#\" + id).selectAll(\".innerSlice\").data(_data).transition().duration(750).attrTween(\"d\", arcTweenInner);\n    d3.select(\"#\" + id).selectAll(\".topSlice\").data(_data).transition().duration(750).attrTween(\"d\", arcTweenTop);\n    d3.select(\"#\" + id).selectAll(\".outerSlice\").data(_data).transition().duration(750).attrTween(\"d\", arcTweenOuter);\n    d3.select(\"#\" + id).selectAll(\".percent\").data(_data).transition().duration(750).attrTween(\"x\", textTweenX).attrTween(\"y\", textTweenY).text(getPercent);\n  };\n\n  Donut3D.draw = function (id, data, x\n  /*center x*/\n  , y\n  /*center y*/\n  , rx\n  /*radius x*/\n  , ry\n  /*radius y*/\n  , h\n  /*height*/\n  , ir\n  /*inner radius*/\n  ) {\n    var _data = d3.layout.pie().sort(null).value(function (d) {\n      return d.value;\n    })(data);\n\n    var slices = d3.select(\"#\" + id).append(\"g\").attr(\"transform\", \"translate(\" + x + \",\" + y + \")\").attr(\"class\", \"slices\");\n    slices.selectAll(\".innerSlice\").data(_data).enter().append(\"path\").attr(\"class\", \"innerSlice\").style(\"fill\", function (d) {\n      return d3.hsl(d.data.color).darker(0.7);\n    }).attr(\"d\", function (d) {\n      return pieInner(d, rx + 0.5, ry + 0.5, h, ir);\n    }).each(function (d) {\n      this._current = d;\n    });\n    slices.selectAll(\".topSlice\").data(_data).enter().append(\"path\").attr(\"class\", \"topSlice\").style(\"fill\", function (d) {\n      return d.data.color;\n    }).style(\"stroke\", function (d) {\n      return d.data.color;\n    }).attr(\"d\", function (d) {\n      return pieTop(d, rx, ry, ir);\n    }).each(function (d) {\n      this._current = d;\n    });\n    slices.selectAll(\".outerSlice\").data(_data).enter().append(\"path\").attr(\"class\", \"outerSlice\").style(\"fill\", function (d) {\n      return d3.hsl(d.data.color).darker(0.7);\n    }).attr(\"d\", function (d) {\n      return pieOuter(d, rx - .5, ry - .5, h);\n    }).each(function (d) {\n      this._current = d;\n    });\n    slices.selectAll(\".percent\").data(_data).enter().append(\"text\").attr(\"class\", \"percent\").attr(\"x\", function (d) {\n      return 0.6 * rx * Math.cos(0.5 * (d.startAngle + d.endAngle));\n    }).attr(\"y\", function (d) {\n      return 0.6 * ry * Math.sin(0.5 * (d.startAngle + d.endAngle));\n    }).text(getPercent).each(function (d) {\n      this._current = d;\n    });\n  };\n\n  this.Donut3D = Donut3D;\n};\n\nexport default Donut3D;","map":{"version":3,"sources":["/Users/langgao/Documents/HiberSense Dashboard/hibersense-dash/src/components/DonutChart/Donut3D.js"],"names":["d3","Donut3D","pieTop","d","rx","ry","ir","endAngle","startAngle","sx","Math","cos","sy","sin","ex","ey","ret","push","PI","join","pieOuter","h","pieInner","getPercent","round","transition","id","data","arcTweenInner","a","i","interpolate","_current","t","arcTweenTop","arcTweenOuter","textTweenX","textTweenY","_data","layout","pie","sort","value","select","selectAll","duration","attrTween","text","draw","x","y","slices","append","attr","enter","style","hsl","color","darker","each"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\n\nconst Donut3D=()=>{\n\tvar Donut3D={};\n\t\n\tfunction pieTop(d, rx, ry, ir ){\n\t\tif(d.endAngle - d.startAngle == 0 ) return \"M 0 0\";\n\t\tvar sx = rx*Math.cos(d.startAngle),\n\t\t\tsy = ry*Math.sin(d.startAngle),\n\t\t\tex = rx*Math.cos(d.endAngle),\n\t\t\tey = ry*Math.sin(d.endAngle);\n\t\t\t\n\t\tvar ret =[];\n\t\tret.push(\"M\",sx,sy,\"A\",rx,ry,\"0\",(d.endAngle-d.startAngle > Math.PI? 1: 0),\"1\",ex,ey,\"L\",ir*ex,ir*ey);\n\t\tret.push(\"A\",ir*rx,ir*ry,\"0\",(d.endAngle-d.startAngle > Math.PI? 1: 0), \"0\",ir*sx,ir*sy,\"z\");\n\t\treturn ret.join(\" \");\n\t}\n\n\tfunction pieOuter(d, rx, ry, h ){\n\t\tvar startAngle = (d.startAngle > Math.PI ? Math.PI : d.startAngle);\n\t\tvar endAngle = (d.endAngle > Math.PI ? Math.PI : d.endAngle);\n\t\t\n\t\tvar sx = rx*Math.cos(startAngle),\n\t\t\tsy = ry*Math.sin(startAngle),\n\t\t\tex = rx*Math.cos(endAngle),\n\t\t\tey = ry*Math.sin(endAngle);\n\t\t\t\n\t\t\tvar ret =[];\n\t\t\tret.push(\"M\",sx,h+sy,\"A\",rx,ry,\"0 0 1\",ex,h+ey,\"L\",ex,ey,\"A\",rx,ry,\"0 0 0\",sx,sy,\"z\");\n\t\t\treturn ret.join(\" \");\n\t}\n\n\tfunction pieInner(d, rx, ry, h, ir ){\n\t\tvar startAngle = (d.startAngle < Math.PI ? Math.PI : d.startAngle);\n\t\tvar endAngle = (d.endAngle < Math.PI ? Math.PI : d.endAngle);\n\t\t\n\t\tvar sx = ir*rx*Math.cos(startAngle),\n\t\t\tsy = ir*ry*Math.sin(startAngle),\n\t\t\tex = ir*rx*Math.cos(endAngle),\n\t\t\tey = ir*ry*Math.sin(endAngle);\n\n\t\t\tvar ret =[];\n\t\t\tret.push(\"M\",sx, sy,\"A\",ir*rx,ir*ry,\"0 0 1\",ex,ey, \"L\",ex,h+ey,\"A\",ir*rx, ir*ry,\"0 0 0\",sx,h+sy,\"z\");\n\t\t\treturn ret.join(\" \");\n\t}\n\n\tfunction getPercent(d){\n\t\treturn (d.endAngle-d.startAngle > 0.2 ? \n\t\t\t\tMath.round(1000*(d.endAngle-d.startAngle)/(Math.PI*2))/10+'%' : '');\n\t}\t\n\t\n\tDonut3D.transition = function(id, data, rx, ry, h, ir){\n\t\tfunction arcTweenInner(a) {\n\t\t  var i = d3.interpolate(this._current, a);\n\t\t  this._current = i(0);\n\t\t  return function(t) { return pieInner(i(t), rx+0.5, ry+0.5, h, ir);  };\n\t\t}\n\t\tfunction arcTweenTop(a) {\n\t\t  var i = d3.interpolate(this._current, a);\n\t\t  this._current = i(0);\n\t\t  return function(t) { return pieTop(i(t), rx, ry, ir);  };\n\t\t}\n\t\tfunction arcTweenOuter(a) {\n\t\t  var i = d3.interpolate(this._current, a);\n\t\t  this._current = i(0);\n\t\t  return function(t) { return pieOuter(i(t), rx-.5, ry-.5, h);  };\n\t\t}\n\t\tfunction textTweenX(a) {\n\t\t  var i = d3.interpolate(this._current, a);\n\t\t  this._current = i(0);\n\t\t  return function(t) { return 0.6*rx*Math.cos(0.5*(i(t).startAngle+i(t).endAngle));  };\n\t\t}\n\t\tfunction textTweenY(a) {\n\t\t  var i = d3.interpolate(this._current, a);\n\t\t  this._current = i(0);\n\t\t  return function(t) { return 0.6*rx*Math.sin(0.5*(i(t).startAngle+i(t).endAngle));  };\n\t\t}\n\t\t\n\t\tvar _data = d3.layout.pie().sort(null).value(function(d) {return d.value;})(data);\n\t\t\n\t\td3.select(\"#\"+id).selectAll(\".innerSlice\").data(_data)\n\t\t\t.transition().duration(750).attrTween(\"d\", arcTweenInner); \n\t\t\t\n\t\td3.select(\"#\"+id).selectAll(\".topSlice\").data(_data)\n\t\t\t.transition().duration(750).attrTween(\"d\", arcTweenTop); \n\t\t\t\n\t\td3.select(\"#\"+id).selectAll(\".outerSlice\").data(_data)\n\t\t\t.transition().duration(750).attrTween(\"d\", arcTweenOuter); \t\n\t\t\t\n\t\td3.select(\"#\"+id).selectAll(\".percent\").data(_data).transition().duration(750)\n\t\t\t.attrTween(\"x\",textTweenX).attrTween(\"y\",textTweenY).text(getPercent); \t\n\t}\n\t\n\tDonut3D.draw=function(id, data, x /*center x*/, y/*center y*/, \n\t\t\trx/*radius x*/, ry/*radius y*/, h/*height*/, ir/*inner radius*/){\n\t\n\t\tvar _data = d3.layout.pie().sort(null).value(function(d) {return d.value;})(data);\n\t\t\n\t\tvar slices = d3.select(\"#\"+id).append(\"g\").attr(\"transform\", \"translate(\" + x + \",\" + y + \")\")\n\t\t\t.attr(\"class\", \"slices\");\n\t\t\t\n\t\tslices.selectAll(\".innerSlice\").data(_data).enter().append(\"path\").attr(\"class\", \"innerSlice\")\n\t\t\t.style(\"fill\", function(d) { return d3.hsl(d.data.color).darker(0.7); })\n\t\t\t.attr(\"d\",function(d){ return pieInner(d, rx+0.5,ry+0.5, h, ir);})\n\t\t\t.each(function(d){this._current=d;});\n\t\t\n\t\tslices.selectAll(\".topSlice\").data(_data).enter().append(\"path\").attr(\"class\", \"topSlice\")\n\t\t\t.style(\"fill\", function(d) { return d.data.color; })\n\t\t\t.style(\"stroke\", function(d) { return d.data.color; })\n\t\t\t.attr(\"d\",function(d){ return pieTop(d, rx, ry, ir);})\n\t\t\t.each(function(d){this._current=d;});\n\t\t\n\t\tslices.selectAll(\".outerSlice\").data(_data).enter().append(\"path\").attr(\"class\", \"outerSlice\")\n\t\t\t.style(\"fill\", function(d) { return d3.hsl(d.data.color).darker(0.7); })\n\t\t\t.attr(\"d\",function(d){ return pieOuter(d, rx-.5,ry-.5, h);})\n\t\t\t.each(function(d){this._current=d;});\n\n\t\tslices.selectAll(\".percent\").data(_data).enter().append(\"text\").attr(\"class\", \"percent\")\n\t\t\t.attr(\"x\",function(d){ return 0.6*rx*Math.cos(0.5*(d.startAngle+d.endAngle));})\n\t\t\t.attr(\"y\",function(d){ return 0.6*ry*Math.sin(0.5*(d.startAngle+d.endAngle));})\n\t\t\t.text(getPercent).each(function(d){this._current=d;});\t\t\t\t\n\t}\n\t\n\tthis.Donut3D = Donut3D;\n};\n\nexport default Donut3D; \n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/langgao/Documents/HiberSense Dashboard/hibersense-dash/src/components/LineChart/Temperature.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nexport default class Temperature extends Component {\n  componentDidMount() {\n    // set the dimensions and margins of the graph\n    var margin = {\n      top: 10,\n      right: 30,\n      bottom: 30,\n      left: 60\n    },\n        width = 460 - margin.left - margin.right,\n        height = 400 - margin.top - margin.bottom; // append the svg object to the body of the page\n\n    var svg = d3.select(\"#my_dataviz\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\"); //Read the data\n\n    d3.csv(\"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered_comma.csv\", // When reading the csv, I must format variables:\n    function (d) {\n      return {\n        date: d3.timeParse(\"%Y-%m-%d\")(d.date),\n        value: d.value\n      };\n    }, // Now I can use this dataset:\n    function (data) {\n      // Add X axis --> it is a date format\n      var x = d3.scaleTime().domain(d3.extent(data, function (d) {\n        return d.date;\n      })).range([0, width]);\n      const xAxis = svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x)); // Add Y axis\n\n      var y = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return +d.value;\n      })]).range([height, 0]);\n      const yAxis = svg.append(\"g\").call(d3.axisLeft(y)); // Add a clipPath: everything out of this area won't be drawn.\n\n      var clip = svg.append(\"defs\").append(\"svg:clipPath\").attr(\"id\", \"clip\").append(\"svg:rect\").attr(\"width\", width).attr(\"height\", height).attr(\"x\", 0).attr(\"y\", 0); // Add brushing\n\n      var brush = d3.brushX() // Add the brush feature using the d3.brush function\n      .extent([[0, 0], [width, height]]) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n      .on(\"end\", updateChart); // Each time the brush selection changes, trigger the 'updateChart' function\n      // Create the line variable: where both the line and the brush take place\n\n      var line = svg.append('g').attr(\"clip-path\", \"url(#clip)\"); // Add the line\n\n      line.append(\"path\").datum(data).attr(\"class\", \"line\") // I add the class line to be able to modify this line later on.\n      .attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 1.5).attr(\"d\", d3.line().x(function (d) {\n        return x(d.date);\n      }).y(function (d) {\n        return y(d.value);\n      })); // Add the brushing\n\n      line.append(\"g\").attr(\"class\", \"brush\").call(brush); // A function that set idleTimeOut to null\n\n      var idleTimeout;\n\n      function idled() {\n        idleTimeout = null;\n      } // A function that update the chart for given boundaries\n\n\n      function updateChart() {\n        // What are the selected boundaries?\n        const extent = d3.event.selection; // If no selection, back to initial coordinate. Otherwise, update X axis domain\n\n        if (!extent) {\n          if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit\n\n          x.domain([4, 8]);\n        } else {\n          x.domain([x.invert(extent[0]), x.invert(extent[1])]);\n          line.select(\".brush\").call(brush.move, null); // This remove the grey brush area as soon as the selection has been done\n        } // Update axis and line position\n\n\n        xAxis.transition().duration(1000).call(d3.axisBottom(x));\n        line.select('.line').transition().duration(1000).attr(\"d\", d3.line().x(function (d) {\n          return x(d.date);\n        }).y(function (d) {\n          return y(d.value);\n        }));\n      } // If user double click, reinitialize the chart\n\n\n      svg.on(\"dblclick\", function () {\n        x.domain(d3.extent(data, function (d) {\n          return d.date;\n        }));\n        xAxis.transition().call(d3.axisBottom(x));\n        line.select('.line').transition().attr(\"d\", d3.line().x(function (d) {\n          return x(d.date);\n        }).y(function (d) {\n          return y(d.value);\n        }));\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"my_dataviz\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/langgao/Documents/HiberSense Dashboard/hibersense-dash/src/components/LineChart/Temperature.js"],"names":["React","Component","d3","Temperature","componentDidMount","margin","top","right","bottom","left","width","height","svg","select","append","attr","csv","d","date","timeParse","value","data","x","scaleTime","domain","extent","range","xAxis","call","axisBottom","y","scaleLinear","max","yAxis","axisLeft","clip","brush","brushX","on","updateChart","line","datum","idleTimeout","idled","event","selection","setTimeout","invert","move","transition","duration","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nexport default class Temperature extends Component {\n\n    componentDidMount(){\n// set the dimensions and margins of the graph\nvar margin = {top: 10, right: 30, bottom: 30, left: 60},\n    width = 460 - margin.left - margin.right,\n    height = 400 - margin.top - margin.bottom;\n\n// append the svg object to the body of the page\nvar svg = d3.select(\"#my_dataviz\")\n  .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n  .append(\"g\")\n    .attr(\"transform\",\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n//Read the data\nd3.csv(\"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered_comma.csv\",\n\n  // When reading the csv, I must format variables:\n  function(d){\n    return { date : d3.timeParse(\"%Y-%m-%d\")(d.date), value : d.value }\n  },\n\n  // Now I can use this dataset:\n  function(data) {\n\n    // Add X axis --> it is a date format\n    var x = d3.scaleTime()\n      .domain(d3.extent(data, function(d) { return d.date; }))\n      .range([ 0, width ]);\n    const xAxis = svg.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(d3.axisBottom(x));\n\n    // Add Y axis\n    var y = d3.scaleLinear()\n      .domain([0, d3.max(data, function(d) { return +d.value; })])\n      .range([ height, 0 ]);\n    const yAxis = svg.append(\"g\")\n      .call(d3.axisLeft(y));\n\n    // Add a clipPath: everything out of this area won't be drawn.\n    var clip = svg.append(\"defs\").append(\"svg:clipPath\")\n        .attr(\"id\", \"clip\")\n        .append(\"svg:rect\")\n        .attr(\"width\", width )\n        .attr(\"height\", height )\n        .attr(\"x\", 0)\n        .attr(\"y\", 0);\n\n    // Add brushing\n    var brush = d3.brushX()                   // Add the brush feature using the d3.brush function\n        .extent( [ [0,0], [width,height] ] )  // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n        .on(\"end\", updateChart)               // Each time the brush selection changes, trigger the 'updateChart' function\n\n    // Create the line variable: where both the line and the brush take place\n    var line = svg.append('g')\n      .attr(\"clip-path\", \"url(#clip)\")\n\n    // Add the line\n    line.append(\"path\")\n      .datum(data)\n      .attr(\"class\", \"line\")  // I add the class line to be able to modify this line later on.\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"steelblue\")\n      .attr(\"stroke-width\", 1.5)\n      .attr(\"d\", d3.line()\n        .x(function(d) { return x(d.date) })\n        .y(function(d) { return y(d.value) })\n        )\n\n    // Add the brushing\n    line\n      .append(\"g\")\n        .attr(\"class\", \"brush\")\n        .call(brush);\n\n    // A function that set idleTimeOut to null\n    var idleTimeout\n    function idled() { idleTimeout = null; }\n\n    // A function that update the chart for given boundaries\n    function updateChart() {\n\n      // What are the selected boundaries?\n      const extent = d3.event.selection\n\n      // If no selection, back to initial coordinate. Otherwise, update X axis domain\n      if(!extent){\n        if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit\n        x.domain([ 4,8])\n      }else{\n        x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])\n        line.select(\".brush\").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done\n      }\n\n      // Update axis and line position\n      xAxis.transition().duration(1000).call(d3.axisBottom(x))\n      line\n          .select('.line')\n          .transition()\n          .duration(1000)\n          .attr(\"d\", d3.line()\n            .x(function(d) { return x(d.date) })\n            .y(function(d) { return y(d.value) })\n          )\n    }\n\n    // If user double click, reinitialize the chart\n    svg.on(\"dblclick\",function(){\n      x.domain(d3.extent(data, function(d) { return d.date; }))\n      xAxis.transition().call(d3.axisBottom(x))\n      line\n        .select('.line')\n        .transition()\n        .attr(\"d\", d3.line()\n          .x(function(d) { return x(d.date) })\n          .y(function(d) { return y(d.value) })\n      )\n    });\n        })\n    }\n\n\n  render() {\n    return (\n      <div id=\"my_dataviz\">\n        \n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}